<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>공통수학1 학습 대시보드 (반응형 최적화)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- LaTeX Rendering Support (MathJax) -->
    <script>
        window.MathJax = {
            tex: { 
                inlineMath: [['$', '$'], ['\\(', '\\)']], 
                displayMath: [['$$', '$$'], ['\\[', '\\]']],
                processEscapes: true
            },
            options: {
                enableMenu: false
            },
            svg: { fontCache: 'global' },
            startup: {
                ready: () => {
                    MathJax.startup.defaultReady();
                    MathJax.startup.promise.then(() => {
                        console.log('MathJax initial typesetting complete');
                    });
                }
            }
        };
    </script>
    <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>

    <script>
        // --- LOCAL STORAGE MANAGER ---
        const STORAGE_KEY = 'math1_learning_progress_v4_flex';

        const LocalDB = {
            save: (checkedIds) => {
                const data = JSON.stringify(Array.from(checkedIds));
                localStorage.setItem(STORAGE_KEY, data);
                return true;
            },
            load: () => {
                const data = localStorage.getItem(STORAGE_KEY);
                return data ? new Set(JSON.parse(data)) : new Set();
            }
        };

        const state = {
            activeLecture: 1,
            filter: 'all',
            search: '',
            spoilerMode: false,
            checkedIds: new Set(),
            isSyncing: false
        };

        let progressChart = null;
        let mathJaxPromise = Promise.resolve();

        /* COMPLETE DATA SET */
        const allProblems = [
            // ================= LECTURE 1: 다항식의 연산 =================
            { id: "l1-c1", lecture: 1, section: "concept", title: "01", category: "개념 CHECK", mainAns: "(1) $2x^2+xy-y^2-4y+3$ <br> (2) $-y^2-4y+3+xy+2x^2$ <br> (3) $-y^2+(x-4)y+2x^2+3$ <br> (4) $2x^2+3+(x-4)y-y^2$" },
            { id: "l1-c2", lecture: 1, section: "concept", title: "02", category: "개념 CHECK", mainAns: "(1) $-5x^2-xy$ <br> (2) $3x^2+16xy+4y^2$" },
            { id: "l1-e1", lecture: 1, section: "example", title: "01", category: "대표 & 확인", mainAns: "(1) $x^2-4x^2+16x+11$ <br> (2) $6x^2-10x^2+28x-29$ <br> (3) $-2x-11$", checkAns: "$-4x^2+5x-7$" },
            { id: "l1-mc1", lecture: 1, section: "concept", title: "곱셈 01", category: "개념 CHECK", mainAns: "(1) $4a^4b-5a^2b+3ab^2$ <br> (2) $2a^3+9a^2+9a-2$ <br> (3) $3a^4-3a^3+2a^2b+ab-b^2$ <br> (4) $2x^2-xy-3x-3y^2+7y-2$" },
            { id: "l1-mc2", lecture: 1, section: "concept", title: "공식 02", category: "개념 CHECK", mainAns: "(1) $x^2+y^2+z^2+2xy-2yz-2zx$ <br> (2) $8x^3+36x^2+54x+27$ <br> (3) $a^3-12a^2b+48ab^2-64b^3$ <br> (4) $64x^3+1$ <br> (5) $a^3-8b^3$ <br> (6) $x^3+5x^2+2x-8$ <br> (7) $x^3+8y^3-z^3+6xyz$ <br> (8) $x^4+9x^2+81$" },
            { id: "l1-e2", lecture: 1, section: "example", title: "02", category: "대표 & 확인", mainAns: "(1) $1$ <br> (2) $-1$ <br> (3) $14$ <br> (4) $-13$", checkAns: "(1) $1$ <br> (2) $20$" },
            { id: "l1-e3", lecture: 1, section: "example", title: "03", category: "대표 & 확인", mainAns: "(1) $x^2+4y^2+9z^2+4xy+12yz+6zx$ <br> (2) $a^2+b^2+c^2-2ab-2bc+2ca$ <br> (3) $27a^3+54a^2+36a+8$ <br> (4) $8x^3-60x^2y+150xy^2-125y^3$ <br> (5) $125x^3+1$ <br> (6) $27x^3-8y^3$", checkAns: "(1) $2x^3+54x$ <br> (2) $-24$" },
            { id: "l1-e4", lecture: 1, section: "example", title: "04", category: "대표 & 확인", mainAns: "(1) $x^3+9x^2+26x+24$ <br> (2) $a^3+b^3-6ab+8$ <br> (3) $16x^4+36x^2y^2+81y^2$ <br> (4) $a-1$", checkAns: "$x^4-x^3+2x^2+5x+22$" },
            { id: "l1-e5", lecture: 1, section: "example", title: "05", category: "대표 & 확인", mainAns: "(1) $2x^2+4x^2+3x-4$ <br> (2) $-6x^2+7x^2+6x-8$ <br> (3) $a^2-b^2+c^2-2ac$", checkAns: "$5$" },
            // 유형학습 (1차시)
            { id: "l1-s1", lecture: 1, section: "similar", title: "유형 01", category: "유형학습", mainAns: "(1) $7x^2+3xy-7y^2$ <br> (2) $6x^2-xy-y^2$" },
            { id: "l1-s1-2", lecture: 1, section: "similar", title: "유형 01-2", category: "유형학습", mainAns: "$29$" },
            { id: "l1-s2", lecture: 1, section: "similar", title: "유형 02", category: "유형학습", mainAns: "$18$" },
            { id: "l1-s2-2", lecture: 1, section: "similar", title: "유형 02-2", category: "유형학습", mainAns: "$3$" },
            { id: "l1-s3", lecture: 1, section: "similar", title: "유형 03", category: "유형학습", mainAns: "(1) $a^2+9b^2+c^2+6ab-6bc-2ca$ <br> (2) $4x^2+y^2-4xy-12x+6y+9$ <br> (3) $x^3+12x^2+48x+64$ <br> (4) $27x^3-27x^2y+9xy^2-y^3$ <br> (5) $x^3+8y^3$ <br> (6) $8x^3-125$" },
            { id: "l1-s3-2", lecture: 1, section: "similar", title: "유형 03-2", category: "유형학습", mainAns: "$64$" },
            { id: "l1-s4", lecture: 1, section: "similar", title: "유형 04", category: "유형학습", mainAns: "(1) $x^3-7x^2+14x-8$ <br> (2) $a^3-b^3+3ab+1$" },
            { id: "l1-s4-2", lecture: 1, section: "similar", title: "유형 04-2", category: "유형학습", mainAns: "(1) $a^4+9a^2b^2+81b^4$ <br> (2) $a^{16}b^{16}$" },
            { id: "l1-s5", lecture: 1, section: "similar", title: "유형 05", category: "유형학습", mainAns: "$-27$" },
            { id: "l1-s5-2", lecture: 1, section: "similar", title: "유형 05-2", category: "유형학습", mainAns: "$5$" },

            // ================= LECTURE 2: 나눗셈과 항등식 =================
            { id: "l2-c3", lecture: 2, section: "concept", title: "03", category: "개념 CHECK", mainAns: "(1) $13$ <br> (2) $17$ <br> (3) $45$" },
            { id: "l2-c4", lecture: 2, section: "concept", title: "04", category: "개념 CHECK", mainAns: "(1) $6$ <br> (2) $8$ <br> (3) $-14$" },
            { id: "l2-c5", lecture: 2, section: "concept", title: "05", category: "개념 CHECK", mainAns: "(1) $27$ <br> (2) $128$" },
            { id: "l2-e6", lecture: 2, section: "example", title: "06", category: "대표 & 확인", mainAns: "(1) $80$ <br> (2) $16$", checkAns: "$6$" },
            { id: "l2-e7", lecture: 2, section: "example", title: "07", category: "대표 & 확인", mainAns: "(1) $32$ <br> (2) $18$", checkAns: "(1) $23$ <br> (2) $110$ <br> (3) $\\sqrt{21}$ <br> (4) $24\\sqrt{21}$" },
            { id: "l2-e8", lecture: 2, section: "example", title: "08", category: "대표 & 확인", mainAns: "(1) $12$ <br> (2) $37$ <br> (3) $12$ <br> (4) $-12$", checkAns: "$4$" },
            { id: "l2-c1", lecture: 2, section: "concept", title: "나눗셈 01", category: "개념 CHECK", mainAns: "(1) 몫: $3x+3$, 나머지: $2$ <br> (2) 몫: $2x+1$, 나머지: $-3x$" },
            { id: "l2-c2-div", lecture: 2, section: "concept", title: "나눗셈 02", category: "개념 CHECK", mainAns: "(1) $x^3-4x^2+3x-10$ <br> (2) $x^3+4x^2+2$" },
            { id: "l2-e9", lecture: 2, section: "example", title: "09", category: "대표 & 확인", mainAns: "(1) $13$ <br> (2) $6$", checkAns: "$-1$" },
            { id: "l2-e10", lecture: 2, section: "example", title: "10", category: "대표 & 확인", mainAns: "(1) $x^2+3x-2$ <br> (2) 몫: $2x+5$, 나머지: $-2x-11$", checkAns: "$-3$" },
            { id: "l2-ci1", lecture: 2, section: "concept", title: "항등식 01", category: "개념 CHECK", mainAns: "ㄷ, ㄹ, ㅂ" },
            { id: "l2-ci2", lecture: 2, section: "concept", title: "항등식 02", category: "개념 CHECK", mainAns: "(1) $a=2, b=-3$ <br> (2) $a=5, b=2$" },
            { id: "l2-ci3", lecture: 2, section: "concept", title: "항등식 03", category: "개념 CHECK", mainAns: "$a=1, b=3, c=2$" },
            { id: "l2-ci4", lecture: 2, section: "concept", title: "항등식 04", category: "개념 CHECK", mainAns: "$-4$" },
            { id: "l2-e1h", lecture: 2, section: "example", title: "01 (항등식)", category: "대표 & 확인", mainAns: "$a=3, b=-2, c=4$", checkAns: "<strong>확인1</strong> (1) $a=1, k=-3$ (2) $a=1, x=-1$<br><strong>확인2</strong> (1) $-32$ (2) $32$ (3) $0$ (4) $-32$" },
            { id: "l2-e2h", lecture: 2, section: "example", title: "02 (항등식)", category: "대표 & 확인", mainAns: "(1) $a=-1, b=0$ <br> (2) $a=-1, b=-2$", checkAns: "$-1$" },
            // 유형학습 (2차시)
            { id: "l2-s6", lecture: 2, section: "similar", title: "유형 06", category: "유형학습", mainAns: "(1) $63$ <br> (2) $16$" },
            { id: "l2-s6-2", lecture: 2, section: "similar", title: "유형 06-2", category: "유형학습", mainAns: "(1) $199$ <br> (2) $75$" },
            { id: "l2-s7", lecture: 2, section: "similar", title: "유형 07", category: "유형학습", mainAns: "(1) $7$ <br> (2) $18$ <br> (3) $47$ <br> (4) $\\sqrt{5}$ <br> (5) $8\\sqrt{5}$" },
            { id: "l2-s7-2", lecture: 2, section: "similar", title: "유형 07-2", category: "유형학습", mainAns: "$140\\sqrt{2}$" },
            { id: "l2-s8", lecture: 2, section: "similar", title: "유형 08", category: "유형학습", mainAns: "(1) $1$ <br> (2) $1$" },
            { id: "l2-s8-2", lecture: 2, section: "similar", title: "유형 08-2", category: "유형학습", mainAns: "$19$" },
            { id: "l2-s9", lecture: 2, section: "similar", title: "유형 09", category: "유형학습", mainAns: "$6$" },
            { id: "l2-s9-2", lecture: 2, section: "similar", title: "유형 09-2", category: "유형학습", mainAns: "$43$" },
            { id: "l2-s10", lecture: 2, section: "similar", title: "유형 10", category: "유형학습", mainAns: "(1) $x^2+x-4$ <br> (2) 몫: $3x^2+4x+10$, 나머지: $34$" },
            { id: "l2-s10-2", lecture: 2, section: "similar", title: "유형 10-2", category: "유형학습", mainAns: "$-8$" },
            { id: "l2-s1h", lecture: 2, section: "similar", title: "유형 01(항)", category: "유형학습", mainAns: "$a=-7, b=2, c=12$" },
            { id: "l2-s1h-2", lecture: 2, section: "similar", title: "유형 01-2(항)", category: "유형학습", mainAns: "(1) $-32$ <br> (2) $32$ <br> (3) $0$ <br> (4) $-32$" },
            { id: "l2-s2h", lecture: 2, section: "similar", title: "유형 02(항)", category: "유형학습", mainAns: "$a=1, b=-2$" },
            { id: "l2-s2h-2", lecture: 2, section: "similar", title: "유형 02-2(항)", category: "유형학습", mainAns: "$a=6$, 나머지: $x-1$" },

            // ================= LECTURE 3: 나머지정리와 인수정리 =================
            { id: "l3-c1", lecture: 3, section: "concept", title: "01", category: "개념 CHECK", mainAns: "(1) $2$ <br> (2) $-3$ <br> (3) $\\frac{15}{8}$" },
            { id: "l3-c2", lecture: 3, section: "concept", title: "02", category: "개념 CHECK", mainAns: "$-4$" },
            { id: "l3-c3", lecture: 3, section: "concept", title: "03", category: "개념 CHECK", mainAns: "(1) 몫: $3x^2-x-5$, 나머지: $-2$ <br> (2) 몫: $2x^2-3x-2$, 나머지: $2$" },
            { id: "l3-c4", lecture: 3, section: "concept", title: "04", category: "개념 CHECK", mainAns: "몫: $x^2-2x+3$, 나머지: $5$" },
            { id: "l3-e3", lecture: 3, section: "example", title: "03", category: "대표 & 확인", mainAns: "$20$", checkAns: "$5$" },
            { id: "l3-e4", lecture: 3, section: "example", title: "04", category: "대표 & 확인", mainAns: "(1) $-x+1$ <br> (2) $2x^2-x+3$", checkAns: "$32$" },
            { id: "l3-e5", lecture: 3, section: "example", title: "05", category: "대표 & 확인", mainAns: "$5$", checkAns: "$8$" },
            { id: "l3-e6", lecture: 3, section: "example", title: "06", category: "대표 & 확인", mainAns: "(1) $-5$ <br> (2) $3$", checkAns: "$-2$" },
            { id: "l3-e7", lecture: 3, section: "example", title: "07", category: "대표 & 확인", mainAns: "(1) $a=3, b=-12$ <br> (2) $a=2, b=-5$", checkAns: "$3$" },
            { id: "l3-e8", lecture: 3, section: "example", title: "08", category: "대표 & 확인", mainAns: "(1) $-9$ <br> (2) 몫: $-3x+1$, 나머지: $3$", checkAns: "$3$" },
            { id: "l3-e9", lecture: 3, section: "example", title: "09", category: "대표 & 확인", mainAns: "$a=2, b=7, c=5, d=1$", checkAns: "(1) $a=3, b=7, c=5, d=4$ <br> (2) $4.573$" },
            // 유형학습 (3차시)
            { id: "l3-s3", lecture: 3, section: "similar", title: "유형 03", category: "유형학습", mainAns: "$10$" },
            { id: "l3-s3-2", lecture: 3, section: "similar", title: "유형 03-2", category: "유형학습", mainAns: "$3$" },
            { id: "l3-s4", lecture: 3, section: "similar", title: "유형 04", category: "유형학습", mainAns: "(1) $x-2$ <br> (2) $3x^2+7x$" },
            { id: "l3-s4-2", lecture: 3, section: "similar", title: "유형 04-2", category: "유형학습", mainAns: "$-2x+6$" },
            { id: "l3-s5", lecture: 3, section: "similar", title: "유형 05", category: "유형학습", mainAns: "$3$" },
            { id: "l3-s5-2", lecture: 3, section: "similar", title: "유형 05-2", category: "유형학습", mainAns: "$3$" },
            { id: "l3-s6", lecture: 3, section: "similar", title: "유형 06", category: "유형학습", mainAns: "$2$" },
            { id: "l3-s6-2", lecture: 3, section: "similar", title: "유형 06-2", category: "유형학습", mainAns: "$1$" },
            { id: "l3-s7", lecture: 3, section: "similar", title: "유형 07", category: "유형학습", mainAns: "(1) $a=6, b=-11$ <br> (2) $a=-3, b=0$" },
            { id: "l3-s8", lecture: 3, section: "similar", title: "유형 08", category: "유형학습", mainAns: "$20$, 몫: $x^2+3x+2$" },
            { id: "l3-s8-2", lecture: 3, section: "similar", title: "유형 08-2", category: "유형학습", mainAns: "$4$" },
            { id: "l3-s9", lecture: 3, section: "similar", title: "유형 09", category: "유형학습", mainAns: "$a=2, b=-5, c=5, d=2$" },

            // ================= LECTURE 4: 인수분해공식 =================
            { id: "l4-c1", lecture: 4, section: "concept", title: "공식 01", category: "개념 CHECK", mainAns: "(1) $(x+2y+3z)^2$ <br> (2) $(2a+2b-c)^2$" },
            { id: "l4-c2", lecture: 4, section: "concept", title: "공식 02", category: "개념 CHECK", mainAns: "(1) $(2x+y+z)(4x^2+y^2+z^2-2xy-yz-2zx)$ <br> (2) $(a^2+2ab+4b^2)(a^2-2ab+4b^2)$" },
            { id: "l4-e1", lecture: 4, section: "example", title: "01", category: "대표 & 확인", mainAns: "(1) $(a-b+2c)^2$ <br> (2) $(x-2)^3$ <br> (3) $2(2x+y)^3$ <br> (4) $(x+3)(x^2-3x+9)$ <br> (5) $c(a-2b)(a^2+2ab+4b^2)$ <br> (6) $(a+2b+3)(a^2+4b^2+9-2ab-3a-6b)$", checkAns: "(1) $(a+2)(a-2)(a^2+2a+4)(a^2-2a+4)$ <br> (2) $(a-4b)(a^2+ab+7b^2)$ <br> (3) $(a-b)(a^2-ab+b^2)$" },
            { id: "l4-cv1", lecture: 4, section: "concept", title: "여러식 01", category: "개념 CHECK", mainAns: "(1) $(x-1)(x-2)(x^2-3x-3)$ <br> (2) $(x^2+4x-3)(x^2+4x-6)$" },
            { id: "l4-cv2", lecture: 4, section: "concept", title: "여러식 02", category: "개념 CHECK", mainAns: "(1) $(x+1)(x-1)(x^2-2)$ <br> (2) $(x^2+x+3)(x^2-x+3)$" },
            { id: "l4-cv3", lecture: 4, section: "concept", title: "여러식 03", category: "개념 CHECK", mainAns: "(1) $(x-y)(x+z)(x-z)$ <br> (2) $(x-y+1)(3x+4y-6)$" },
            { id: "l4-cv4", lecture: 4, section: "concept", title: "여러식 04", category: "개념 CHECK", mainAns: "(1) $(x+2)(x+3)(2x-1)$ <br> (2) $(x-1)^2(x+2)(x-3)$" },
            { id: "l4-e2", lecture: 4, section: "example", title: "02", category: "대표 & 확인", mainAns: "(1) $(x-1)^2(x^2-2x+2)$ <br> (2) $(x^2-5x+2)(x+1)(x-6)$ <br> (3) $(x^2+2x-5)(x^2+2x-6)$", checkAns: "$4$" },
            { id: "l4-e3", lecture: 4, section: "example", title: "03", category: "대표 & 확인", mainAns: "(1) $(x^2+2)(x+2)(x-2)$ <br> (2) $(3x^2+2)(x+1)(x-1)$ <br> (3) $(x^2+3x-2)(x^2-3x-2)$ <br> (4) $(x^2+2x+4)(x^2-2x+4)$", checkAns: "$3$" },
            { id: "l4-e4", lecture: 4, section: "example", title: "04", category: "대표 & 확인", mainAns: "(1) $(b-3c+a)(a-c)$ <br> (2) $(x+y)(x+2)(x-1)$ <br> (3) $(x+y+2)(x+2y-3)$", checkAns: "$-6$" },
            { id: "l4-e5", lecture: 4, section: "example", title: "05", category: "대표 & 확인", mainAns: "(1) $(x-1)(x+2)^2$ <br> (2) $(x+1)(x-2)(x+2)(x-3)$", checkAns: "$(x-3)(x-2)(x+1)$" },
            { id: "l4-e6", lecture: 4, section: "example", title: "06", category: "대표 & 확인", mainAns: "(1) 빗변의 길이가 c인 직각삼각형 <br> (2) $a=c$인 이등변삼각형", checkAns: "ㄴ, ㄷ" },
            { id: "l4-e7", lecture: 4, section: "example", title: "07", category: "대표 & 확인", mainAns: "(1) $48$ <br> (2) $105$", checkAns: "$47$" },
            // 유형학습 (4차시)
            { id: "l4-s2", lecture: 4, section: "similar", title: "유형 02", category: "유형학습", mainAns: "(1) $(x^2-3x+3)(x^2-3x-2)$ <br> (2) $(x+1)(x-2)(x+2)(x-3)$ <br> (3) $(x^2+4x+2)(x^2+4x-4)$" },
            { id: "l4-s2-2", lecture: 4, section: "similar", title: "유형 02-2", category: "유형학습", mainAns: "$(x^2+5x+8)(x^2+5x+2)$" },
            { id: "l4-s3", lecture: 4, section: "similar", title: "유형 03", category: "유형학습", mainAns: "(1) $(x+1)(x-1)(x^2+6)$ <br> (2) $(x^2+xy+2y^2)(x^2-xy+2y^2)$" },
            { id: "l4-s3-2", lecture: 4, section: "similar", title: "유형 03-2", category: "유형학습", mainAns: "$13$" },
            { id: "l4-s4", lecture: 4, section: "similar", title: "유형 04", category: "유형학습", mainAns: "(1) $(x+1)(x+y-2)$ <br> (2) $(y-z)(2x+y-z)$ <br> (3) $(x-y-1)(x^2+x-y+1)$" },
            { id: "l4-s4-2", lecture: 4, section: "similar", title: "유형 04-2", category: "유형학습", mainAns: "$-(a-b)(b-c)(c-a)$" },
            { id: "l4-s5", lecture: 4, section: "similar", title: "유형 05", category: "유형학습", mainAns: "(1) $(x-1)(x+2)(x-4)$ <br> (2) $(x+2)(2x+3)(x-2)$ <br> (3) $(x-1)^2(x+1)(x+2)$" },
            { id: "l4-s5-2", lecture: 4, section: "similar", title: "유형 05-2", category: "유형학습", mainAns: "$-1$" },
            { id: "l4-s6", lecture: 4, section: "similar", title: "유형 06", category: "유형학습", mainAns: "$1$" },
            { id: "l4-s6-2", lecture: 4, section: "similar", title: "유형 06-2", category: "유형학습", mainAns: "$3$" },
            { id: "l4-s7", lecture: 4, section: "similar", title: "유형 07", category: "유형학습", mainAns: "(1) $-12-4\\sqrt{3}$ <br> (2) $-2\\sqrt{5}$" },
            { id: "l4-s7-2", lecture: 4, section: "similar", title: "유형 07-2", category: "유형학습", mainAns: "(1) $510$ <br> (2) $-120$" },

            // ================= LECTURE 5: 복소수 =================
            { id: "l5-c1", lecture: 5, section: "concept", title: "복소수 01", category: "개념 CHECK", mainAns: "$3$" },
            { id: "l5-c2", lecture: 5, section: "concept", title: "복소수 02", category: "개념 CHECK", mainAns: "(1) $a=3, b=-5$ <br> (2) $a=2, b=0$ <br> (3) $a=1, b=-\\sqrt{2}$ <br> (4) $a=4, b=7$" },
            { id: "l5-c3", lecture: 5, section: "concept", title: "복소수 03", category: "개념 CHECK", mainAns: "(1) $3-2i$ <br> (2) $-1-\\sqrt{2}i$ <br> (3) $\\sqrt{3}$ <br> (4) $-3i$" },
            { id: "l5-e1", lecture: 5, section: "example", title: "01", category: "대표 & 확인", mainAns: "$7$", checkAns: "$10$" },
            { id: "l5-oc1", lecture: 5, section: "concept", title: "연산 01", category: "개념 CHECK", mainAns: "(1) $5i$ <br> (2) $7-i$ <br> (3) $-26i$ <br> (4) $-8+5i$" },
            { id: "l5-oc2", lecture: 5, section: "concept", title: "연산 02", category: "개념 CHECK", mainAns: "(1) $11+7i$ <br> (2) $4\\sqrt{5}-2i$ <br> (3) $13$ <br> (4) $-86i$" },
            { id: "l5-oc3", lecture: 5, section: "concept", title: "연산 03", category: "개념 CHECK", mainAns: "(1) $\\frac{1}{2} - \\frac{3}{2}i$ <br> (2) $\\frac{2}{13}i$ <br> (3) $i$ <br> (4) $\\frac{3}{10} + \\frac{11}{10}i$" },
            { id: "l5-oc4", lecture: 5, section: "concept", title: "연산 04", category: "개념 CHECK", mainAns: "$4$" },
            { id: "l5-e2", lecture: 5, section: "example", title: "02", category: "대표 & 확인", mainAns: "(1) $3+6i$ <br> (2) $5+5i$ <br> (3) $4$ <br> (4) $1+i$", checkAns: "$-2$" },
            { id: "l5-e3", lecture: 5, section: "example", title: "03", category: "대표 & 확인", mainAns: "(1) $-4$ <br> (2) $-2$", checkAns: "$1$" },
            { id: "l5-e4", lecture: 5, section: "example", title: "04", category: "대표 & 확인", mainAns: "(1) $8$ <br> (2) $\\frac{22}{5}$", checkAns: "$2$" },
            { id: "l5-e5", lecture: 5, section: "example", title: "05", category: "대표 & 확인", mainAns: "(1) $13$ <br> (2) $-41$", checkAns: "$-2$" },
            { id: "l5-e6", lecture: 5, section: "example", title: "06", category: "대표 & 확인", mainAns: "(1) $2-9i$ <br> (2) $2+4i$", checkAns: "$4+2i$" },
            { id: "l5-pc1", lecture: 5, section: "concept", title: "성질 01", category: "개념 CHECK", mainAns: "(1) $i$ <br> (2) $0$" },
            { id: "l5-pc2", lecture: 5, section: "concept", title: "성질 02", category: "개념 CHECK", mainAns: "(1) $16$ <br> (2) $-2$" },
            { id: "l5-pc3", lecture: 5, section: "concept", title: "성질 03", category: "개념 CHECK", mainAns: "(1) $4$ <br> (2) $-\\frac{\\sqrt{3}}{3} i$ <br> (3) $4$ <br> (4) $\\frac{1}{3} + \\frac{2\\sqrt{2}}{3} i$" },
            { id: "l5-e7", lecture: 5, section: "example", title: "07", category: "대표 & 확인", mainAns: "(1) $-1+i$ <br> (2) $-1$ <br> (3) $0$ <br> (4) $0$", checkAns: "(1) $1$ <br> (2) $-11$ <br> (3) $0$ <br> (4) $2$" },
            { id: "l5-e8", lecture: 5, section: "example", title: "08", category: "대표 & 확인", mainAns: "(1) $-4 + \\frac{5}{2}i$ <br> (2) $-2a-2b$", checkAns: "(1) $3$ <br> (2) $3$" },
            // 유형학습 (5차시)
            { id: "l5-s1", lecture: 5, section: "similar", title: "유형 01", category: "유형학습", mainAns: "ㄱ, ㄹ" },
            { id: "l5-s2", lecture: 5, section: "similar", title: "유형 02", category: "유형학습", mainAns: "(1) $-5-2i$ <br> (2) $8+i$ <br> (3) $7+i$ <br> (4) $\\frac{3}{10} + \\frac{9}{10}i$" },
            { id: "l5-s2-2", lecture: 5, section: "similar", title: "유형 02-2", category: "유형학습", mainAns: "$6$" },
            { id: "l5-s3", lecture: 5, section: "similar", title: "유형 03", category: "유형학습", mainAns: "(1) $-3$ <br> (2) $-\\frac{1}{4}$" },
            { id: "l5-s3-2", lecture: 5, section: "similar", title: "유형 03-2", category: "유형학습", mainAns: "$2$" },
            { id: "l5-s4", lecture: 5, section: "similar", title: "유형 04", category: "유형학습", mainAns: "(1) $\\sqrt{3}i$ <br> (2) $30$" },
            { id: "l5-s4-2", lecture: 5, section: "similar", title: "유형 04-2", category: "유형학습", mainAns: "$-3$" },
            { id: "l5-s5", lecture: 5, section: "similar", title: "유형 05", category: "유형학습", mainAns: "$20$" },
            { id: "l5-s5-2", lecture: 5, section: "similar", title: "유형 05-2", category: "유형학습", mainAns: "$-2+4i$" },
            { id: "l5-s6", lecture: 5, section: "similar", title: "유형 06", category: "유형학습", mainAns: "(1) $5-i$ <br> (2) $1+3i$" },
            { id: "l5-s6-2", lecture: 5, section: "similar", title: "유형 06-2", category: "유형학습", mainAns: "$4i$" },
            { id: "l5-s7", lecture: 5, section: "similar", title: "유형 07", category: "유형학습", mainAns: "$2$" },
            { id: "l5-s7-2", lecture: 5, section: "similar", title: "유형 07-2", category: "유형학습", mainAns: "$-1+i$" },
            { id: "l5-s8", lecture: 5, section: "similar", title: "유형 08", category: "유형학습", mainAns: "(1) $4\\sqrt{2}i$ <br> (2) $6a+b$" },

            // ================= LECTURE 6: 이차방정식 =================
            { id: "l6-c1", lecture: 6, section: "concept", title: "01", category: "개념 CHECK", mainAns: "(1) $x=-2$ 또는 $x=4$ <br> (2) $x=-\\frac{1}{3}$ 또는 $x=1$ <br> (3) $x=3$ (중근) <br> (4) $x=-3$ 또는 $x=1$" },
            { id: "l6-c2", lecture: 6, section: "concept", title: "02", category: "개념 CHECK", mainAns: "(1) $x=\\frac{1}{2}$ (중근) <br> (2) $x=-\\frac{3}{2}$ 또는 $x=4$" },
            { id: "l6-c3", lecture: 6, section: "concept", title: "03", category: "개념 CHECK", mainAns: "(1) $x=\\frac{-5\\pm\\sqrt{13}}{6}$ <br> (2) $x=1\\pm\\sqrt{3}i$" },
            { id: "l6-e1", lecture: 6, section: "example", title: "01", category: "대표 & 확인", mainAns: "(1) $x=2\\pm3i$ <br> (2) $x=-\\sqrt{3}+1$ 또는 $x=-\\sqrt{3}$ <br> (3) $x=-1$ 또는 $x=-2-\\sqrt{2}$", checkAns: "$2$" },
            { id: "l6-e2", lecture: 6, section: "example", title: "02", category: "대표 & 확인", mainAns: "$a=1$, 다른 한 근: $0$", checkAns: "$7$" },
            { id: "l6-e3", lecture: 6, section: "example", title: "03 (절댓값)", category: "대표 & 확인", mainAns: "(1) $x=-3$ 또는 $x=3$ <br> (2) $x=-4$ 또는 $x=2$", checkAns: "$-2$" },
            { id: "l6-e3-2", lecture: 6, section: "example", title: "03 (가우스)", category: "대표 & 확인", mainAns: "(1) $-4$ <br> (2) $-2$", checkAns: "$x=-\\sqrt{6}$ 또는 $x=-1+\\sqrt{7}$" },
            { id: "l6-e4", lecture: 6, section: "example", title: "04", category: "대표 & 확인", mainAns: "$10 \\text{ m}$", checkAns: "$7 \\text{ cm}$" },
            { id: "l6-cond1", lecture: 6, section: "concept", title: "판별식 01", category: "개념 CHECK", mainAns: "(1) $a>2$ <br> (2) $a=2$ <br> (3) $a<2$" },
            { id: "l6-cond2", lecture: 6, section: "concept", title: "판별식 02", category: "개념 CHECK", mainAns: "$-6, 6$" },
            { id: "l6-e5", lecture: 6, section: "example", title: "05", category: "대표 & 확인", mainAns: "(1) $m > -\\frac{9}{4}$ <br> (2) $m = -\\frac{9}{4}$ <br> (3) $m < -\\frac{9}{4}$", checkAns: "서로 다른 두 허근" },
            { id: "l6-e6", lecture: 6, section: "example", title: "06", category: "대표 & 확인", mainAns: "(1) $a=-2, b=4$ <br> (2) $k=-1$", checkAns: "$\\frac{33}{4}$" },
            // 유형학습 (6차시)
            { id: "l6-s1", lecture: 6, section: "similar", title: "유형 01", category: "유형학습", mainAns: "(1) $x=\\sqrt{2}, \\sqrt{2}-1$ <br> (2) $x=\\sqrt{3}, 1-\\sqrt{3}$" },
            { id: "l6-s2", lecture: 6, section: "similar", title: "유형 02", category: "유형학습", mainAns: "$a=0$, 다른 한 근: $3$" },
            { id: "l6-s3-1", lecture: 6, section: "similar", title: "유형 03-1", category: "유형학습", mainAns: "(1) $x=\\pm\\frac{3}{2}$ <br> (2) $x=-4, 3$" },
            { id: "l6-s3-2", lecture: 6, section: "similar", title: "유형 03-2", category: "유형학습", mainAns: "$-2$" },
            { id: "l6-s4", lecture: 6, section: "similar", title: "유형 04", category: "유형학습", mainAns: "$4m$" },
            { id: "l6-s4-2", lecture: 6, section: "similar", title: "유형 04-2", category: "유형학습", mainAns: "$8\\text{cm}$" },
            { id: "l6-s5", lecture: 6, section: "similar", title: "유형 05", category: "유형학습", mainAns: "(1) $k>-\\frac{4}{3}$ <br> (2) $k=-\\frac{4}{3}$ <br> (3) $k<-\\frac{4}{3}$" },
            { id: "l6-s6-1", lecture: 6, section: "similar", title: "유형 06-1", category: "유형학습", mainAns: "$\\frac{3}{4}$" },
            { id: "l6-s6-2", lecture: 6, section: "similar", title: "유형 06-2", category: "유형학습", mainAns: "빗변의 길이가 $b$인 직각삼각형" }
        ];

        // --- HANDLERS ---
        window.switchLecture = (l) => {
            state.activeLecture = l;
            LocalDB.save(state.checkedIds);
            updateUI();
        };

        window.setFilter = (f) => {
            state.filter = f;
            document.querySelectorAll('.filter-btn').forEach(btn => {
                if (btn.dataset.filter === f) {
                    btn.className = "filter-btn px-5 py-2 rounded-full text-xs font-black bg-slate-800 text-white shadow-md transition-all";
                } else {
                    btn.className = "filter-btn px-5 py-2 rounded-full text-xs font-black bg-white border border-slate-200 text-slate-600 hover:bg-slate-50 transition-all";
                }
            });
            renderGrid();
        };

        const toggleProblem = (id) => {
            const nextChecked = new Set(state.checkedIds);
            if (nextChecked.has(id)) nextChecked.delete(id);
            else nextChecked.add(id);
            
            state.checkedIds = nextChecked;
            LocalDB.save(nextChecked);
            updateUI();
        };

        window.toggleSpoilerMode = (val) => {
            state.spoilerMode = val;
            renderGrid();
        };

        // --- INIT CHART FUNCTION ---
        const initChart = () => {
            const ctx = document.getElementById('lectureChart').getContext('2d');
            const centerTextPlugin = {
                id: 'centerText',
                beforeDraw: (chart) => {
                    const { width, height, ctx } = chart;
                    ctx.restore();
                    const fontSize = (height / 120).toFixed(2);
                    ctx.font = `bold ${fontSize}em sans-serif`;
                    ctx.textBaseline = "middle";
                    ctx.fillStyle = "#1e293b";
                    
                    const lectureProbs = allProblems.filter(p => p.lecture === state.activeLecture);
                    const lectureChecked = lectureProbs.filter(p => state.checkedIds.has(p.id)).length;
                    const percent = lectureProbs.length > 0 ? Math.round((lectureChecked / lectureProbs.length) * 100) : 0;
                    
                    const text = `${percent}%`;
                    const textX = Math.round((width - ctx.measureText(text).width) / 2);
                    const textY = height / 2;
                    ctx.fillText(text, textX, textY);
                    ctx.save();
                }
            };

            progressChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['완료', '미완료'],
                    datasets: [{
                        data: [0, 100],
                        backgroundColor: ['#4f46e5', '#f1f5f9'],
                        borderWidth: 0,
                        hoverOffset: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    cutout: '78%',
                    plugins: { legend: { display: false }, tooltip: { enabled: false } },
                    animation: { duration: 600 }
                },
                plugins: [centerTextPlugin]
            });
        };

        // --- UI FUNCTIONS ---
        const updateUI = () => {
            const lectureTitles = ["1차시: 다항식의 연산", "2차시: 나눗셈과 항등식", "3차시: 나머지정리와 인수정리", "4차시: 인수분해공식과 응용", "5차시: 복소수의 성질과 연산", "6차시: 이차방정식의 풀이와 판별식"];
            document.getElementById('current-lecture-title').innerText = lectureTitles[state.activeLecture-1];
            
            const lectureProbs = allProblems.filter(p => p.lecture === state.activeLecture);
            const lectureChecked = lectureProbs.filter(p => state.checkedIds.has(p.id)).length;
            document.getElementById('lecture-progress-text').innerText = `${lectureChecked}/${lectureProbs.length}`;
            
            const totalPercent = allProblems.length > 0 ? Math.round((state.checkedIds.size / allProblems.length) * 100) : 0;
            document.getElementById('total-progress-percent').innerText = `${totalPercent}%`;

            if (progressChart) {
                progressChart.data.datasets[0].data = [lectureChecked, Math.max(0, lectureProbs.length - lectureChecked)];
                progressChart.update();
            }

            document.querySelectorAll('.nav-btn').forEach(btn => {
                const l = parseInt(btn.dataset.lecture);
                if (l === state.activeLecture) {
                    btn.classList.add('active-tab');
                } else {
                    btn.classList.remove('active-tab');
                }
            });

            renderGrid();
        };

        const createCard = (prob) => {
            const isChecked = state.checkedIds.has(prob.id);
            const spoilerClass = state.spoilerMode ? 'spoiler-active' : '';
            let colorClass = prob.section === 'concept' ? "border-emerald-100 bg-emerald-50/20" : 
                            (prob.section === 'similar' ? "border-amber-100 bg-amber-50/20" : "border-indigo-100 bg-white");
            const checkBtnStyle = isChecked ? "bg-emerald-500 text-white" : "bg-white text-slate-400";

            // Enhanced answer formatter for horizontal readability
            const formatAns = (ans) => {
                if (!ans) return "";
                const safeAns = String(ans);
                
                // Use regex to split by <br> tags while preserving content
                const parts = safeAns.split(/<br\s*\/?>/i);
                
                if (parts.length > 1) {
                    return `<div class="ans-inline-container">
                        ${parts.map(p => {
                            let content = p.trim(); 
                            if (!content) return '';
                            return `<span class="ans-inline-item">${content}</span>`;
                        }).join('')}
                    </div>`;
                }
                return `<div class="math-text">${safeAns}</div>`;
            };

            let ansContent = prob.category === '대표 & 확인' 
                ? `<div class="space-y-4">
                    <div>
                        <span class="text-[10px] font-black text-slate-400 block mb-1.5 ml-1">대표예제</span>
                        <div class="p-3 bg-white/70 rounded-xl math-text ${spoilerClass}" onclick="this.classList.toggle('spoiler-revealed')">${formatAns(prob.mainAns)}</div>
                    </div>
                    <div>
                        <span class="text-[10px] font-black text-slate-400 block mb-1.5 ml-1">확인문제</span>
                        <div class="p-3 bg-white/70 rounded-xl math-text ${spoilerClass}" onclick="this.classList.toggle('spoiler-revealed')">${formatAns(prob.checkAns)}</div>
                    </div>
                   </div>`
                : `<div class="p-4 bg-white/70 rounded-xl math-text ${spoilerClass}" onclick="this.classList.toggle('spoiler-revealed')">${formatAns(prob.mainAns)}</div>`;

            const div = document.createElement('div');
            div.className = `p-5 rounded-3xl border shadow-sm flex flex-col justify-between card-hover ${colorClass} relative overflow-hidden`;
            div.innerHTML = `
                ${isChecked ? '<div class="absolute top-0 right-0 w-8 h-8 bg-emerald-500 transform rotate-45 translate-x-4 -translate-y-4"></div>' : ''}
                <div class="mb-4">
                    <div class="flex justify-between items-center mb-4">
                        <span class="text-[10px] px-2.5 py-1 rounded-full font-black uppercase bg-white/90 border border-slate-100 shadow-sm">${prob.category}</span>
                    </div>
                    <h3 class="text-xl font-black text-slate-800 mb-4 tracking-tight">문제 ${prob.title}</h3>
                    ${ansContent}
                </div>
                <button id="btn-${prob.id}" class="mt-4 w-full py-2.5 rounded-2xl text-xs font-black border transition-all ${checkBtnStyle}">
                    ${isChecked ? '완료' : '진도 체크'}
                </button>`;
            
            div.querySelector(`#btn-${prob.id}`).addEventListener('click', () => toggleProblem(prob.id));
            return div;
        };

        const renderGrid = () => {
            const grid = document.getElementById('problems-grid');
            grid.innerHTML = '';
            
            const filtered = allProblems.filter(p => {
                const matchLecture = p.lecture === state.activeLecture;
                const matchFilter = state.filter === 'all' || p.section === state.filter;
                const matchSearch = p.title.toLowerCase().includes(state.search.toLowerCase());
                return matchLecture && matchFilter && matchSearch;
            });

            filtered.forEach(p => grid.appendChild(createCard(p)));

            // Trigger MathJax re-render safely
            mathJaxPromise = mathJaxPromise.then(() => {
                if (window.MathJax && window.MathJax.typesetPromise) {
                    return window.MathJax.typesetPromise();
                }
                return Promise.resolve();
            }).catch(err => console.error('MathJax render error:', err));
        };

        document.addEventListener('DOMContentLoaded', () => {
            state.checkedIds = LocalDB.load();
            initChart();
            updateUI();

            document.getElementById('search-input').addEventListener('input', (e) => {
                state.search = e.target.value;
                renderGrid();
            });

            document.getElementById('spoiler-toggle').addEventListener('change', (e) => {
                toggleSpoilerMode(e.target.checked);
            });
            
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.addEventListener('click', () => switchLecture(parseInt(btn.dataset.lecture)));
            });

            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.addEventListener('click', () => setFilter(btn.dataset.filter));
            });
        });
    </script>

    <style>
        .chart-container { height: 200px; }
        .spoiler-active { filter: blur(7px); cursor: pointer; transition: 0.3s; }
        .spoiler-revealed { filter: none !important; }
        .card-hover { transition: 0.25s ease-out; }
        .card-hover:hover { transform: translateY(-6px); box-shadow: 0 20px 25px -5px rgba(0,0,0,0.1), 0 10px 10px -5px rgba(0,0,0,0.04); }
        .active-tab { background-color: #4f46e5; color: white; box-shadow: 0 4px 6px -1px rgba(79, 70, 229, 0.4); }
        .math-text { font-size: 1.05em; line-height: 1.6; color: #334155; font-weight: 500; }
        
        /* Updated styles for proper inline-block flow */
        .ans-inline-container {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem 1rem;
            align-items: baseline;
        }
        .ans-inline-item {
            display: inline-block;
            white-space: nowrap; /* Prevent line breaks inside an item unless necessary */
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800 font-sans antialiased">

    <div class="max-w-7xl mx-auto px-4 py-8 flex flex-col min-h-screen">

        <!-- Header -->
        <header class="mb-8 flex flex-col md:flex-row md:items-end justify-between gap-6 border-b pb-8 border-slate-200">
            <div>
                <h1 class="text-3xl font-black text-slate-900 tracking-tight">
                    공통수학1 <span class="text-indigo-600">통합 정답 대시보드</span>
                </h1>
                <div class="text-[11px] font-black mt-2 uppercase tracking-widest text-emerald-500">
                    로컬 저장소 모드 (인터넷 불필요)
                </div>
            </div>
            
            <nav class="flex p-1 bg-slate-200 rounded-2xl overflow-x-auto shadow-inner">
                <button class="nav-btn px-5 py-2.5 rounded-xl text-xs font-black whitespace-nowrap transition-all active-tab" data-lecture="1">1차시</button>
                <button class="nav-btn px-5 py-2.5 rounded-xl text-xs font-black whitespace-nowrap transition-all" data-lecture="2">2차시</button>
                <button class="nav-btn px-5 py-2.5 rounded-xl text-xs font-black whitespace-nowrap transition-all" data-lecture="3">3차시</button>
                <button class="nav-btn px-5 py-2.5 rounded-xl text-xs font-black whitespace-nowrap transition-all" data-lecture="4">4차시</button>
                <button class="nav-btn px-5 py-2.5 rounded-xl text-xs font-black whitespace-nowrap transition-all" data-lecture="5">5차시</button>
                <button class="nav-btn px-5 py-2.5 rounded-xl text-xs font-black whitespace-nowrap transition-all" data-lecture="6">6차시</button>
            </nav>
        </header>

        <!-- Stats Section -->
        <section class="grid grid-cols-1 lg:grid-cols-4 gap-8 mb-10">
            <div class="bg-white p-6 rounded-3xl shadow-sm border border-slate-100 flex items-center justify-center">
                <div class="chart-container w-full">
                    <canvas id="lectureChart"></canvas>
                </div>
            </div>
            
            <div class="lg:col-span-3 bg-indigo-900 text-white p-8 rounded-3xl relative overflow-hidden shadow-xl">
                <div class="z-10 relative">
                    <div class="flex justify-between items-start mb-4">
                        <h2 class="text-2xl font-black tracking-tight">
                            <span id="current-lecture-title">1차시: 다항식의 연산</span>
                        </h2>
                    </div>
                    <p class="text-indigo-100 text-sm mb-6 leading-relaxed opacity-90">
                        현재 <strong>로컬 테스트 모드</strong>로 실행 중입니다. 데이터는 브라우저에 자동 저장되지만, 
                        다른 기기와 동기화되지 않습니다. 모든 수식은 MathJax로 렌더링됩니다.
                    </p>
                    
                    <div class="flex gap-6">
                        <div class="bg-white/10 px-5 py-3 rounded-2xl border border-white/20 backdrop-blur-sm">
                            <span class="block text-[9px] text-indigo-300 uppercase font-black mb-1">차시 진도</span>
                            <span class="text-2xl font-black" id="lecture-progress-text">0/0</span>
                        </div>
                        <div class="bg-emerald-500/20 px-5 py-3 rounded-2xl border border-emerald-500/30 backdrop-blur-sm">
                            <span class="block text-[9px] text-emerald-300 uppercase font-black mb-1">통합 학습률</span>
                            <span class="text-2xl font-black" id="total-progress-percent">0%</span>
                        </div>
                    </div>
                </div>
                <div class="absolute -right-20 -bottom-20 w-64 h-64 bg-white/5 rounded-full blur-3xl"></div>
            </div>
        </section>

        <!-- Control Bar -->
        <div class="sticky top-6 z-40 bg-white/90 backdrop-blur-xl p-5 mb-10 rounded-3xl border border-slate-200 shadow-lg flex flex-col md:flex-row items-center justify-between gap-6">
            <div class="flex flex-wrap gap-2.5">
                <button class="filter-btn px-5 py-2 rounded-full text-xs font-black bg-slate-800 text-white shadow-md transition-all" data-filter="all">전체</button>
                <button class="filter-btn px-5 py-2 rounded-full text-xs font-black bg-white border border-slate-200 hover:bg-slate-50 transition-all" data-filter="concept">개념 CHECK</button>
                <button class="filter-btn px-5 py-2 rounded-full text-xs font-black bg-white border border-slate-200 hover:bg-slate-50 transition-all" data-filter="example">대표 & 확인</button>
                <button class="filter-btn px-5 py-2 rounded-full text-xs font-black bg-white border border-slate-200 hover:bg-slate-50 transition-all" data-filter="similar">유형학습</button>
            </div>

            <div class="flex items-center gap-6 w-full md:w-auto">
                <div class="relative w-full md:w-56">
                    <input type="text" id="search-input" placeholder="문제 번호 검색..." class="w-full px-4 py-2.5 bg-slate-100 rounded-2xl text-sm border-none focus:ring-2 focus:ring-indigo-500 transition-all">
                </div>
                <label class="flex items-center cursor-pointer group">
                    <input type="checkbox" id="spoiler-toggle" class="sr-only peer">
                    <div class="w-11 h-6 bg-slate-300 rounded-full peer-checked:bg-indigo-600 transition-all relative after:content-[''] after:absolute after:top-1 after:left-1 after:bg-white after:rounded-full after:h-4 after:w-4 peer-checked:after:translate-x-5 shadow-inner"></div>
                    <span class="ml-3 text-xs font-black text-slate-600 group-hover:text-indigo-600">정답 가리기</span>
                </label>
            </div>
        </div>

        <!-- Problems Grid -->
        <main id="problems-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 pb-16">
            <!-- Cards Generated Dynamicly -->
        </main>

        <!-- Footer -->
        <footer class="mt-auto py-12 text-center border-t border-slate-200">
            <p class="text-[11px] text-slate-400 font-black uppercase tracking-[0.2em]">
                © 2025 GongSoo1 Learning Dashboard. Local Storage Mode.
            </p>
        </footer>

    </div>
</body>
</html>
